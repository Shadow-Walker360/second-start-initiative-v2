<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Donate - Second Start Initiative</title>

<style>
:root {
  --coastal-midnight: #0f1e2e;
  --warm-ember: #c36a2d;
  --deep-rouge: #7b1e2b;
  --soft-ivory: #f7f7f5;
  --charcoal: #1c1c1c;
  --shadow: rgba(0,0,0,0.15);
}

* {margin:0; padding:0; box-sizing:border-box;}
body {font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif; color: var(--charcoal); background: var(--soft-ivory);}
a {text-decoration:none; color:inherit;}
img {display:block; max-width:100%; transition: transform 0.3s;}
img:hover {transform: scale(1.05);}
nav {position:fixed; top:0; width:100%; height:52px; background: var(--coastal-midnight); color:white; display:flex; justify-content:space-between; align-items:center; padding:0 1rem; z-index:1000; box-shadow:0 2px 6px var(--shadow);}
nav .brand {font-weight:600;}
nav .menu button {background:none; border:none; color:white; font-size:1.5rem; cursor:pointer;}
nav .dropdown {position:absolute; top:52px; right:1rem; background:white; color:var(--charcoal); min-width:180px; border-radius:6px; display:none; box-shadow:0 8px 20px var(--shadow);}
nav .dropdown a {display:block; padding:0.75rem 1rem; border-bottom:1px solid #eee; transition: background 0.2s;}
nav .dropdown a:hover {background: var(--soft-ivory);}
nav .dropdown.show {display:block;}

main {margin-top:60px; padding:2rem 1.5rem; max-width:900px; margin:auto;}
h1,h2{color:var(--coastal-midnight);}
h1{margin-bottom:1rem; font-size:2.4rem; text-align:center; animation: fadeInDown 1s;}
h2{margin-top:1rem;}
p{margin-bottom:1rem; line-height:1.6;}

.section {padding:3rem 1rem; border-radius:12px; background:white; margin-bottom:2rem; display:flex; align-items:center; gap:1.5rem; box-shadow:0 4px 12px var(--shadow); transform: translateY(50px); opacity:0; animation: fadeUp 0.8s forwards;}
.section:nth-child(1) {animation-delay:0.2s;}
.section:nth-child(2) {animation-delay:0.4s;}

input {padding:0.6rem; margin:0.4rem 0; width:100%; max-width:250px; border:1px solid #ccc; border-radius:6px;}
.btn {padding:0.6rem 1.2rem; border:none; border-radius:6px; cursor:pointer; font-weight:600; transition: all 0.3s;}
.btn-paypal {background:#003087; color:white;}
.btn-paypal:hover {background:#002060; transform: scale(1.05);}
.btn-mpesa {background:#4CAF50; color:white;}
.btn-mpesa:hover {background:#3e8e41; transform: scale(1.05);}

/* Animations */
@keyframes fadeUp {
  to {opacity:1; transform: translateY(0);}
}
@keyframes fadeInDown {
  from {opacity:0; transform: translateY(-20px);}
  to {opacity:1; transform: translateY(0);}
}

</style>
</head>
<body>

<!-- NAVBAR -->
<nav>
  <div class="brand">Second Start Initiative</div>
  <div class="menu">
    <button id="menuBtn">⋮</button>
    <div id="dropdown" class="dropdown">
      <a href="index.html">Home</a>
      <a href="about.html">About</a>
      <a href="founders-story.html">Founder’s Story</a>
      <a href="programs.html">Programs</a>
      <a href="testimonials.html">Testimonials</a>
      <a href="get-involved.html">Get Involved</a>
      <a href="donate.html" style="font-weight:600;">Donate</a>
    </div>
  </div>
</nav>

<main>
  <h1>Support Second Start Initiative</h1>
  <p style="text-align:center; max-width:700px; margin:auto;">Your donation helps young adults transitioning out of care to build independent, fulfilling lives. Each contribution makes a real difference.</p>

  <!-- PayPal Section -->
  <div class="section">
    <img src="https://www.paypalobjects.com/webstatic/mktg/logo/pp_cc_mark_111x69.jpg" alt="PayPal Logo">
    <div>
      <h2>Donate with PayPal</h2>
      <p>Click below to donate securely using PayPal.</p>
      <button id="paypalBtn" class="btn btn-paypal">Donate via PayPal</button>
    </div>
  </div>

  <!-- M-Pesa Section -->
  <div class="section">
    <img src="https://upload.wikimedia.org/wikipedia/commons/1/13/M-PESA_logo.png" alt="M-Pesa Logo">
    <div>
      <h2>Donate via M-Pesa</h2>
      <p>Enter your phone number and amount to donate via M-Pesa.</p>
      <input type="text" id="mpesaPhone" placeholder="Enter phone number (e.g. 2547XXXXXXXX)">
      <input type="number" id="mpesaAmount" placeholder="Amount (KES)">
      <button class="btn btn-mpesa" id="mpesaBtn">Donate via M-Pesa</button>
    </div>
  </div>
</main>

<script>
  // Dropdown menu
  const menuBtn = document.getElementById("menuBtn");
  const dropdown = document.getElementById("dropdown");
  menuBtn.addEventListener("click",()=>{dropdown.classList.toggle("show");});

  // M-Pesa donation
  const mpesaBtn = document.getElementById("mpesaBtn");
  mpesaBtn.addEventListener("click", async () => {
    const phone = document.getElementById("mpesaPhone").value.trim();
    const amount = document.getElementById("mpesaAmount").value.trim();
    if(!phone || !amount){alert("Enter phone & amount"); return;}
    try{
      const res = await fetch('http://localhost:5000/mpesa/stkpush', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ phone, amount })
      });
      const data = await res.json();
      alert('STK Push sent! Check your phone.');
      console.log('M-Pesa response:', data);
    } catch(err){
      console.error(err);
      alert('Failed to send STK Push.');
    }
  });

  // PayPal donation
  const paypalBtn = document.getElementById("paypalBtn");
  paypalBtn.addEventListener("click", async () => {
    const amount = prompt("Enter donation amount in USD:");
    if(!amount) return;

    try{
      const res = await fetch('http://localhost:5000/paypal/create-order', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ amount })
      });
      const data = await res.json();
      // Capture order
      const capture = await fetch('http://localhost:5000/paypal/capture-order', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({ orderID: data.id })
      });
      const captureData = await capture.json();
      alert('Thank you for your donation via PayPal!');
      console.log('PayPal capture:', captureData);
    } catch(err){
      console.error(err);
      alert('PayPal donation failed.');
    }
  });
</script>

</body>
</html>
